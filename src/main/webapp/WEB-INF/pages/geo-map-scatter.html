<!DOCTYPE html>
<html style="height: 100%">
   <head>
       <meta charset="utf-8">
       <script src="js/jquery-3.3.1.min.js"></script>
   </head>
   <body style="height: 100%; margin: 0">
       <div id="container" style="height: 100%"></div>
       <script type="text/javascript" src="js/echarts.min.js"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts-gl/echarts-gl.min.js"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts-stat/ecStat.min.js"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/dataTool.min.js"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/china.js"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/world.js"></script>
       <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=ZUONbpqGBsYGXNIYHicvbAbM"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/bmap.min.js"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/simplex.js"></script>
       <script type="text/javascript">
var dom = document.getElementById("container");
var myChart = echarts.init(dom);
var app = {};
option = null;
var data = [
    {name: '海门', value: 9},
    {name: '鄂尔多斯', value: 12},
    {name: '招远', value: 12},
    {name: '舟山', value: 12},
    {name: '齐齐哈尔', value: 14},
    {name: '盐城', value: 15},
    {name: '赤峰', value: 16},
    {name: '青岛', value: 18},
    {name: '乳山', value: 18},
    {name: '金昌', value: 19},
    {name: '泉州', value: 21},
    {name: '南通', value: 23},
    {name: '拉萨', value: 24},
    {name: '云浮', value: 24},
    {name: '上海', value: 25},
    {name: '攀枝花', value: 25},
    {name: '承德', value: 25},
    {name: '汕尾', value: 26},
    {name: '丹东', value: 27},
    {name: '瓦房店', value: 30},
    {name: '延安', value: 38},
    {name: '咸阳', value: 43},
    {name: '南昌', value: 54},
    {name: '柳州', value: 54},
    {name: '三亚', value: 54},
    {name: '泸州', value: 57},
    {name: '克拉玛依', value: 72}
];

//var geoCoordMap = {
//   '海门':[121.15,31.89],
//   '鄂尔多斯':[109.781327,39.608266],
//   '招远':[120.38,37.35],
//   '舟山':[122.207216,29.985295],
//   '齐齐哈尔':[123.97,47.33],
//   '盐城':[120.13,33.38],
//   '赤峰':[118.87,42.28],
//   '青岛':[120.33,36.07],
//   '乳山':[121.52,36.89],
//   '金昌':[102.188043,38.520089],
//   '泉州':[118.58,24.93],
//   '莱西':[120.53,36.86],
//   '日照':[119.46,35.42],
//   '胶南':[119.97,35.88],
//   '南通':[121.05,32.08],
//   '拉萨':[91.11,29.97],
//   '云浮':[112.02,22.93],
//   '梅州':[116.1,24.55],
//   '文登':[122.05,37.2],
//   '上海':[121.48,31.22],
//   '攀枝花':[101.718637,26.582347],
//   '威海':[122.1,37.5],
//   '承德':[117.93,40.97],
//   '厦门':[118.1,24.46],
//   '汕尾':[115.375279,22.786211],
//   '潮州':[116.63,23.68],
//   '丹东':[124.37,40.13],
//   '太仓':[121.1,31.45],
//   '曲靖':[103.79,25.51],
//   '烟台':[121.39,37.52],
//   '福州':[119.3,26.08],
//   '瓦房店':[121.979603,39.627114],
//   '即墨':[120.45,36.38],
//   '抚顺':[123.97,41.97],
//   '玉溪':[102.52,24.35],
//   '张家口':[114.87,40.82],
//   '阳泉':[113.57,37.85],
//   '莱州':[119.942327,37.177017],
//   '湖州':[120.1,30.86],
//   '汕头':[116.69,23.39],
//   '昆山':[120.95,31.39],
//   '宁波':[121.56,29.86],
//   '湛江':[110.359377,21.270708],
//   '揭阳':[116.35,23.55],
//   '荣成':[122.41,37.16],
//   '连云港':[119.16,34.59],
//   '葫芦岛':[120.836932,40.711052],
//   '常熟':[120.74,31.64],
//   '东莞':[113.75,23.04],
//   '河源':[114.68,23.73],
//   '淮安':[119.15,33.5],
//   '泰州':[119.9,32.49],
//   '南宁':[108.33,22.84],
//   '营口':[122.18,40.65],
//   '惠州':[114.4,23.09],
//   '江阴':[120.26,31.91],
//   '蓬莱':[120.75,37.8],
//   '韶关':[113.62,24.84],
//   '嘉峪关':[98.289152,39.77313],
//   '广州':[113.23,23.16],
//   '延安':[109.47,36.6],
//   '太原':[112.53,37.87],
//   '清远':[113.01,23.7],
//   '中山':[113.38,22.52],
//   '昆明':[102.73,25.04],
//   '寿光':[118.73,36.86],
//   '盘锦':[122.070714,41.119997],
//   '长治':[113.08,36.18],
//   '深圳':[114.07,22.62],
//   '珠海':[113.52,22.3],
//   '宿迁':[118.3,33.96],
//   '咸阳':[108.72,34.36],
//   '铜川':[109.11,35.09],
//   '平度':[119.97,36.77],
//   '佛山':[113.11,23.05],
//   '海口':[110.35,20.02],
//   '江门':[113.06,22.61],
//   '章丘':[117.53,36.72],
//   '肇庆':[112.44,23.05],
//   '大连':[121.62,38.92],
//   '临汾':[111.5,36.08],
//   '吴江':[120.63,31.16],
//   '石嘴山':[106.39,39.04],
//   '沈阳':[123.38,41.8],
//   '苏州':[120.62,31.32],
//   '茂名':[110.88,21.68],
//   '嘉兴':[120.76,30.77],
//   '长春':[125.35,43.88],
//   '胶州':[120.03336,36.264622],
//   '银川':[106.27,38.47],
//   '张家港':[120.555821,31.875428],
//   '三门峡':[111.19,34.76],
//   '锦州':[121.15,41.13],
//   '南昌':[115.89,28.68],
//   '柳州':[109.4,24.33],
//   '三亚':[109.511909,18.252847],
//   '自贡':[104.778442,29.33903],
//   '吉林':[126.57,43.87],
//   '阳江':[111.95,21.85],
//   '泸州':[105.39,28.91],
//   '西宁':[101.74,36.56],
//   '宜宾':[104.56,29.77],
//   '呼和浩特':[111.65,40.82],
//   '成都':[104.06,30.67],
//   '大同':[113.3,40.12],
//   '镇江':[119.44,32.2],
//   '桂林':[110.28,25.29],
//   '张家界':[110.479191,29.117096],
//   '宜兴':[119.82,31.36],
//   '北海':[109.12,21.49],
//   '西安':[108.95,34.27],
//   '金坛':[119.56,31.74],
//   '东营':[118.49,37.46],
//   '牡丹江':[129.58,44.6],
//   '遵义':[106.9,27.7],
//   '绍兴':[120.58,30.01],
//   '扬州':[119.42,32.39],
//   '常州':[119.95,31.79],
//   '潍坊':[119.1,36.62],
//   '重庆':[106.54,29.59],
//   '台州':[121.420757,28.656386],
//   '南京':[118.78,32.04],
//   '滨州':[118.03,37.36],
//   '贵阳':[106.71,26.57],
//   '无锡':[120.29,31.59],
//   '本溪':[123.73,41.3],
//   '克拉玛依':[84.77,45.59],
//   '渭南':[109.5,34.52],
//   '马鞍山':[118.48,31.56],
//   '宝鸡':[107.15,34.38],
//   '焦作':[113.21,35.24],
//   '句容':[119.16,31.95],
//   '北京':[116.46,39.92],
//   '徐州':[117.2,34.26],
//   '衡水':[115.72,37.72],
//   '包头':[110,40.58],
//   '绵阳':[104.73,31.48],
//   '乌鲁木齐':[87.68,43.77],
//   '枣庄':[117.57,34.86],
//   '杭州':[120.19,30.26],
//   '淄博':[118.05,36.78],
//   '鞍山':[122.85,41.12],
//   '溧阳':[119.48,31.43],
//   '库尔勒':[86.06,41.68],
//   '安阳':[114.35,36.1],
//   '开封':[114.35,34.79],
//   '济南':[117,36.65],
//   '德阳':[104.37,31.13],
//   '温州':[120.65,28.01],
//   '九江':[115.97,29.71],
//   '邯郸':[114.47,36.6],
//   '临安':[119.72,30.23],
//   '兰州':[103.73,36.03],
//   '沧州':[116.83,38.33],
//   '临沂':[118.35,35.05],
//   '南充':[106.110698,30.837793],
//   '天津':[117.2,39.13],
//   '富阳':[119.95,30.07],
//   '泰安':[117.13,36.18],
//   '诸暨':[120.23,29.71],
//   '郑州':[113.65,34.76],
//   '哈尔滨':[126.63,45.75],
//   '聊城':[115.97,36.45],
//   '芜湖':[118.38,31.33],
//   '唐山':[118.02,39.63],
//   '平顶山':[113.29,33.75],
//   '邢台':[114.48,37.05],
//   '德州':[116.29,37.45],
//   '济宁':[116.59,35.38],
//   '荆州':[112.239741,30.335165],
//   '宜昌':[111.3,30.7],
//   '义乌':[120.06,29.32],
//   '丽水':[119.92,28.45],
//   '洛阳':[112.44,34.7],
//   '秦皇岛':[119.57,39.95],
//   '株洲':[113.16,27.83],
//   '石家庄':[114.48,38.03],
//   '莱芜':[117.67,36.19],
//   '常德':[111.69,29.05],
//   '保定':[115.48,38.85],
//   '湘潭':[112.91,27.87],
//   '金华':[119.64,29.12],
//   '岳阳':[113.09,29.37],
//   '长沙':[113,28.21],
//   '衢州':[118.88,28.97],
//   '廊坊':[116.7,39.53],
//   '菏泽':[115.480656,35.23375],
//   '合肥':[117.27,31.86],
//   '武汉':[114.31,30.52],
//   '大庆':[125.03,46.58]
//};
//var geoCoordMapAdd = {
//    '上饶': [117.97,28.45],
//    '赣州': [114.93,25.83],
//    '邵阳': [111.47,27.25],
//    '玉林': [110.17,22.63],
//    '莆田': [119.00,25.43],
//    '永州': [111.62,26.43],
//    '南平': [118.17,26.65],
//    '孝感': [113.92,30.93],
//    '宿州': [116.98,33.63],
//    '新乡': [113.90,35.30],
//    '衡阳': [112.57,26.90],
//    '黄冈': [114.87,30.45],
//    '广元': [105.83,32.43],
//    '钦州': [108.62,21.95],
//    '内江': [105.05,29.58],
//    '随州': [113.37,31.72],
//    '萍乡': [113.85,27.63],
//    '通辽': [122.27,43.62],
//    '资阳': [104.65,30.12],
//    '汉中': [107.02,33.07],
//    '淮南': [117.00,32.63],
//    '阜阳': [115.82,32.90],
//    '怀化': [110.00,27.57],
//    '辽阳': [123.17,41.27],
//    '黄石': [115.03,30.20],
//    '襄樊': [112.15,32.02],
//    '荆门': [112.20,31.03],
//    '通化': [125.93,41.73],
//    '漳州': [117.65,24.52],
//    '铜仁': [109.21,27.73],
//    '南阳': [112.52,33.00],
//    '信阳': [114.07,32.13],
//    '百色': [106.62,23.90],
//    '鹰潭': [117.07,28.27],
//    '宜春': [114.38,27.80],
//    '朔州': [112.43,39.33],
//    '广安': [106.63,30.47],
//    '湘西土家族苗族自治州': [109.73,28.32],
//    '益阳': [112.32,28.60],
//    '吉安': [114.98,27.12],
//    '鹤岗': [130.27,47.33],
//    '安庆': [117.05,30.53],
//    '景德镇': [117.17,29.27],
//    '眉山': [103.83,30.05],
//    '梧州': [111.27,23.48],
//    '河池': [108.07,24.70],
//    '毕节': [105.29,27.32],
//    '六安': [116.50,31.77],
//    '凉山彝族自治州': [102.27,27.90],
//    '白山': [126.42,41.93],
//    '红河哈尼族彝族自治州': [103.40,23.37],
//    '西双版纳傣族自治州': [100.80,22.02],
//    '呼伦贝尔': [119.77,49.22],
//    '延边朝鲜族自治州': [129.50,42.88],
//    '乐山': [103.77,29.57],
//    '遂宁': [105.57,30.52],
//    '宣城': [118.75,30.95],
//    '蚌埠': [117.38,32.92],
//    '吕梁': [111.13,37.52],
//    '贵港': [109.60,23.10],
//    '新余': [114.92,27.82],
//    '濮阳': [115.03,35.77],
//    '驻马店': [114.02,32.98],
//    '娄底': [112.00,27.73],
//    '三明': [117.62,26.27],
//    '宁德': [119.52,26.67],
//    '铁岭': [123.83,42.28],
//    '安康': [109.02,32.68],
//    '佳木斯': [130.37,46.82],
//    '黑河': [127.48,50.25],
//    '昌吉回族自治州': [87.30,44.02],
//    '池州': [117.48,30.67],
//    '黔东南苗族侗族自治州': [107.97,26.58],
//    '黔南布依族苗族自治州': [107.52,26.27],
//    '哈密': [93.44,42.78],
//    '晋城': [112.83,35.50],
//    '伊犁哈萨克自治州': [81.32,43.92],
//    '大兴安岭地区': [124.12,50.42],
//    '乌兰察布': [113.12,40.98],
//    '石河子': [86.03,44.30],
//    '通辽': [122.27,43.62],
//    '阜新': [121.67,42.02],
//    '大理白族自治州': [100.23,25.60],
//    '丽江': [100.23,26.88],
//    '榆林': [109.73,38.28],
//    '保山': [99.17,25.12],
//    '普洱': [101.03,23.07],
//    '周口': [114.65,33.62],
//    '四平': [124.35,43.17],
//    '鹤壁': [114.28,35.75],
//    '铜陵': [117.82,30.93],
//    '贺州': [111.55,24.42],
//    '龙岩': [117.03,25.10],
//    '日喀则': [88.82,29.28],
//    '安顺': [105.95,26.25],
//    '兴安盟': [122.05,46.08],
//    '乌海': [106.82,39.67],
//    '绥化': [126.98,46.63],
//    '鸡西': [130.97,45.30],
//    '巴彦淖尔': [107.42,40.75],
//    '商丘': [115.65,34.45],
//    '漯河': [114.02,33.58],
//    '七台河': [130.95,45.78],
//    '抚州': [116.35,28.00],
//    '许昌': [113.85,34.03],
//    '阿克苏地区': [80.27,41.17],
//    '博尔塔拉蒙古自治州': [82.07,44.90],
//    '防城港': [108.35,21.70],
//    '来宾': [109.23,23.73],
//    '琼海': [110.46,19.25],
//    '十堰': [110.78,32.65],
//    '咸宁': [114.32,29.85],
//    '恩施土家族苗族自治州': [109.47,30.30],
//    '运城': [110.98,35.02],
//    '鄂州': [114.88,30.40],
//    '晋中': [112.75,37.68],
//    '忻州': [112.73,38.42],
//    '滁州': [118.32,32.30],
//    '淮北': [116.80,33.95],
//    '郴州': [113.02,25.78],
//    '雅安': [103.00,29.98],
//    '达州': [107.50,31.22],
//    '天水': [105.72,34.58],
//    '张掖': [100.45,38.93],
//    '白银': [104.18,36.55],
//    '酒泉': [98.52,39.75],
//    '甘孜藏族自治州': [101.97,30.05],
//    '白城': [122.83,45.62],
//    '新北市': [121.67,24.91],
//    '台中市': [120.94,24.23],
//    '台南市': [120.25,23.14],
//    '黔西南布依族苗族自治州': [104.89,25.09],
//    '桃园市': [121.21,24.93],
//    '屏东县': [120.62,22.55],
//    '宜兰县': [121.72,24.69],
//    '台北市': [121.56,25.09],
//    '云林县': [120.39,23.75],
//    '海东': [102.10,36.50],
//    '儋州': [109.57,19.51],
//    '昌江黎族自治县': [109.05, 19.26],
//    '彰化县': [120.48,23.99]
//};
//geoCoordMap = geoCoordMap.concat(geoCoordMapAdd);

$.get('data/access_data.json', function (weiboData) {
    var pvCData = weiboData[0];
    var uvCData = weiboData[1];
    var pvPData = weiboData[2];
    var uvPData = weiboData[3];

    // province pv map region
    var pvMapData = pvPData.map(function(data, idx){
        return {"name": data.province, "value": data.value};
    });
    option.series[1].data = pvMapData;

    // city uv scatter point
    $.get("data/geocoordmap.json", function(geoCoordMap){
        var uvMapData = uvCData.map(function(data, idx){
            var geoCoord = geoCoordMap[data.city];
            if (geoCoord) {
                return {"name": data.city, "value": geoCoord.concat(data.value)};
            } else{
                console.log("no geo for "+data.city);
                return {};
            }
        });
        option.series[0].data = uvMapData;

        // update map display
        if (option && typeof option === "object") {
            myChart.setOption(option, true);
        }
    });
});


var option = {
    backgroundColor: '#404a59',
    tooltip: {},
    visualMap: {
        min: 0,
        max: 500,
        left: 'left',
        top: 'bottom',
        text: ['MORE','LESS'],
        textStyle:{
            color: '#FFFFFF'
        },
        seriesIndex: [1],
        inRange: {
            color: ['#7FFFD4','#00688B']
        },
        calculable : true
    },
    geo: {
        map: 'china',
        roam: true,
        label: {
            normal: {
                show: true,
                textStyle: {
                    color: 'rgba(0,0,0,0.4)'
                }
            }
        },
        itemStyle: {
            normal:{
                borderColor: 'rgba(0, 0, 0, 0.2)'
            },
            emphasis:{
                areaColor: null,
                shadowOffsetX: 0,
                shadowOffsetY: 0,
                shadowBlur: 20,
                borderWidth: 0,
                shadowColor: 'rgba(0, 0, 0, 0.5)'
            }
        }
    },
    series : [
        {
            name: 'Top 5',
            type: 'effectScatter',
            coordinateSystem: 'geo',
            data: [],
            symbolSize: function (val) {
                if (val){
                    var r = val[2] / 5;
                    if (r<3) r = 3;
                    if (r>50) r = 50;
                    return r;
                } else{
                    return 0;
                }
            },
            showEffectOn: 'render',
            rippleEffect: {
                brushType: 'stroke'
            },
            hoverAnimation: true,
            label: {
                normal: {
                    formatter: '{b}',
                    position: 'right',
                    show: false
                }
            },
            itemStyle: {
                normal: {
                    color: '#d7feffdd',
                    shadowBlur: 10,
                    shadowColor: '#333'
                }
            },
            zlevel: 1
        },

        {
            name: 'categoryA',
            type: 'map',
            geoIndex: 0,
            // tooltip: {show: false},
            itemStyle: {
                normal: {
                    areaColor: '#323c48',
                    borderColor: '#404a59'
                },
                emphasis: {
                    areaColor: '#2a333d'
                }
            },
            data:[

            ]
        }
    ]
};

       </script>
   </body>
</html>